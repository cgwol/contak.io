import{s as m,u as n,j as u,F as d,c as s,N as f}from"./index-88cc3bb7.js";import{E as v}from"./index-88cc3bb7.js";import{f as b,A as h}from"./fetchSignedAlbumUrls-842ad04c.js";import"./tracks-6e7a3842.js";const g=async()=>{const{data:t,error:r}=await m.from("my_profile").select().maybeSingle();if(r)throw r;const{data:e,error:a}=await m.from("my_purchased_albums").select().limit(30);if(a)throw a;const{albumCovers:l,trackFiles:c}=await b(e);for(const o of e)if(o.signedUrls=l.get(o.album_id),Array.isArray(o.album_tracks))for(const i of o.album_tracks)i.signedUrl=c.get(i.track_id);return{my_purchased_albums:e,my_profile:t}},A=function(){const{my_purchased_albums:r,my_profile:e}=n();return u(d,{children:[s(f,{}),s("h1",{children:"My Purchased Albums"}),Array.isArray(r)&&r.length>0?s("div",{children:r.map(a=>s(h,{album:a},a.album_id))}):s("div",{children:"Nothing!"})]})};export{A as Component,v as ErrorBoundary,g as loader};
