import{s as f,u as b,j as c,F as g,c as r,N as p}from"./index-7300ae23.js";import{E as U}from"./index-7300ae23.js";import{f as h,A as _}from"./fetchSignedAlbumUrls-b99e67b3.js";const A=async()=>{const{data:t,error:s}=await f.from("public_albums").select().limit(30);if(s)throw s;const{albumCovers:o,trackFiles:l}=await h(t);for(const a of t)if(a.signedUrls=o.get(a.album_id),Array.isArray(a.album_tracks))for(const n of a.album_tracks)n.signedUrl=l.get(n.track_id);return t},k=function(){const s=b();return console.log(s),c(g,{children:[r(p,{}),r("h1",{children:"Albums"}),r("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",margin:"2em 3em",gap:"1.5em"},children:s.map(o=>{const{album_id:l,album_name:a,album_creators:n,album_tracks:m,signedUrls:i}=o,u=n.map(e=>`${e.first_name} ${e.last_name}`).join(", "),d=m==null?void 0:m.map(e=>r(_,{track:e},e.track_id));return c("div",{className:"flex-center",children:[i&&i.length&&r("img",{src:i[0].signedUrl,alt:`album cover for ${a}`}),c("h2",{className:"fs-m",children:[a," By ",u,r("ol",{className:"fs-s ta-center",style:{margin:"0 auto",width:"fit-content"},children:m&&d})]},l)]},l)})})]})};export{k as Component,U as ErrorBoundary,A as loader};
